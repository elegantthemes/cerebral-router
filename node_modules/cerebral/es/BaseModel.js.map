{"version":3,"sources":["../src/BaseModel.js"],"names":["extractModuleProp","StateProvider","BaseModel","controller","initialState","module","changedPaths","on","onModuleAdded","bind","onModuleRemoved","path","set","state","unset","changes","slice"],"mappings":";;;;AAAA,SAASA,iBAAT,QAAkC,SAAlC;AACA,OAAOC,aAAP,MAA0B,mBAA1B;;IAEMC,S;AACJ,qBAAYC,UAAZ,EAAwB;AAAA;;AACtB,SAAKC,YAAL,GAAoBJ,kBAAkBG,WAAWE,MAA7B,EAAqC,OAArC,CAApB;AACA,SAAKJ,aAAL,GAAqBA,aAArB;AACA,SAAKK,YAAL,GAAoB,EAApB;;AAEAH,eAAWI,EAAX,CAAc,aAAd,EAA6B,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAA7B;AACAN,eAAWI,EAAX,CAAc,eAAd,EAA+B,KAAKG,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAA/B;AACD;;;;kCACaE,I,EAAMN,M,EAAQ;AAC1B,WAAKO,GAAL,CAASD,IAAT,EAAeN,OAAOQ,KAAtB;AACD;;;oCACeF,I,EAAM;AACpB,WAAKG,KAAL,CAAWH,IAAX;AACD;;;4BACO;AACN,UAAMI,UAAU,KAAKT,YAAL,CAAkBU,KAAlB,EAAhB;;AAEA,WAAKV,YAAL,GAAoB,EAApB;;AAEA,aAAOS,OAAP;AACD;;;;;;AAGH,eAAeb,SAAf","file":"BaseModel.js","sourcesContent":["import { extractModuleProp } from './utils'\nimport StateProvider from './providers/State'\n\nclass BaseModel {\n  constructor(controller) {\n    this.initialState = extractModuleProp(controller.module, 'state')\n    this.StateProvider = StateProvider\n    this.changedPaths = []\n\n    controller.on('moduleAdded', this.onModuleAdded.bind(this))\n    controller.on('moduleRemoved', this.onModuleRemoved.bind(this))\n  }\n  onModuleAdded(path, module) {\n    this.set(path, module.state)\n  }\n  onModuleRemoved(path) {\n    this.unset(path)\n  }\n  flush() {\n    const changes = this.changedPaths.slice()\n\n    this.changedPaths = []\n\n    return changes\n  }\n}\n\nexport default BaseModel\n"]}