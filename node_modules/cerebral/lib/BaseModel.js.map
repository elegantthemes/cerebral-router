{"version":3,"sources":["../src/BaseModel.js"],"names":["BaseModel","controller","initialState","module","StateProvider","changedPaths","on","onModuleAdded","bind","onModuleRemoved","path","set","state","unset","changes","slice"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;IAEMA,S;AACJ,qBAAYC,UAAZ,EAAwB;AAAA;;AACtB,SAAKC,YAAL,GAAoB,8BAAkBD,WAAWE,MAA7B,EAAqC,OAArC,CAApB;AACA,SAAKC,aAAL;AACA,SAAKC,YAAL,GAAoB,EAApB;;AAEAJ,eAAWK,EAAX,CAAc,aAAd,EAA6B,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAA7B;AACAP,eAAWK,EAAX,CAAc,eAAd,EAA+B,KAAKG,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAA/B;AACD;;;;kCACaE,I,EAAMP,M,EAAQ;AAC1B,WAAKQ,GAAL,CAASD,IAAT,EAAeP,OAAOS,KAAtB;AACD;;;oCACeF,I,EAAM;AACpB,WAAKG,KAAL,CAAWH,IAAX;AACD;;;4BACO;AACN,UAAMI,UAAU,KAAKT,YAAL,CAAkBU,KAAlB,EAAhB;;AAEA,WAAKV,YAAL,GAAoB,EAApB;;AAEA,aAAOS,OAAP;AACD;;;;;;kBAGYd,S","file":"BaseModel.js","sourcesContent":["import { extractModuleProp } from './utils'\nimport StateProvider from './providers/State'\n\nclass BaseModel {\n  constructor(controller) {\n    this.initialState = extractModuleProp(controller.module, 'state')\n    this.StateProvider = StateProvider\n    this.changedPaths = []\n\n    controller.on('moduleAdded', this.onModuleAdded.bind(this))\n    controller.on('moduleRemoved', this.onModuleRemoved.bind(this))\n  }\n  onModuleAdded(path, module) {\n    this.set(path, module.state)\n  }\n  onModuleRemoved(path) {\n    this.unset(path)\n  }\n  flush() {\n    const changes = this.changedPaths.slice()\n\n    this.changedPaths = []\n\n    return changes\n  }\n}\n\nexport default BaseModel\n"]}